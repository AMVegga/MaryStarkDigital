<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tienda digital de productos creados a medida: ebooks originales, apps m√≥viles y de escritorio, servicios freelance de programaci√≥n fullstack, m√∫sica, intros en video y m√°s. Descubre contenido digital √∫nico y hecho por un desarrollador creativo.">
    <title>MaryStark Digital</title>
    <link rel="stylesheet" href="styles.css">
    <script 
    src="https://www.paypal.com/sdk/js?client-id=BAA72W7_CelSYwsVtNTcoqiRQCFuM3D_qpUOJWw3PIC_XwCJ2PL9uCJULZkl9Uhs77-khphtYHIQqMck-s&components=hosted-buttons&disable-funding=venmo&currency=USD">
    </script>
    
    <style>
        .typing {
        width: 38ch;        /* N√∫mero de caracteres a mostrar */
        overflow: hidden;
        white-space: nowrap;
        border-right: 3px solid #0f0; /* ‚ÄúCursor‚Äù */
        animation: typing 3s steps(35), blink .5s step-end infinite alternate;
        }

        @keyframes typing {
        from { width: 0 }
        }

        @keyframes blink {
        50% { border-color: transparent }
        }
        .buttonpaypal {
        width: auto;
        height: auto;
        border-radius: 25px;
        background: linear-gradient(to right, black, #010af6);;
        }

        .img {
        width: 20vw;
        height: 5vw;
        border-radius: 25px;
        }
     
    </style>

</head>
<body>

    <!-- Encabezado -->  
   <header class="brand">
    <img src="logo.jpg" alt="" class="logo">
    <h1 style="text-decoration: underline;">MaryStark Digital</h1>
       
        <nav>
            <ul>                                
                <li><a href="contacto.html">Contacto</a></li>                
                <li><a href="carrito.html">üõíMi pedido (<span id="contador-carrito">0</span>)</a></li>
                <li><a class="linkpaypal" id="paypal-link" href="#" target="_blank">Pagar con Paypal</a></li>
                <li><a href="admin.html">Admin</a></li>
            </ul>
        </nav>     
    </header>

    <!-- Banner -->
    <section id="inicio" class="banner">
        <h2 class="typing" style="color: #39FF14;">Lo mejor en productos digitales y mas</h2>
    </section>

    <div>    
    <center><input type="text" id="buscador2" placeholder="Buscar" onkeyup="buscarProductos2()"></center>
    </div>

    <!-- Secci√≥n de productos -->

   <section id="productos" class=".agregar-carrito">
    <center><h2 style="color: #39FF14; font-size: medium;">Busca ebooks, musica sin copyright, y mas</h2></center>
    <div class="productos-container" id="productos-container"></div>
</section>
<script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js";

    // ‚¨ÖÔ∏è Cambia esto por tus claves reales
    const supabaseUrl = "https://lnceafmmakkkiebkmfne.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxuY2VhZm1tYWtra2llYmttZm5lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1NTcyMTcsImV4cCI6MjA3OTEzMzIxN30.fH0lC-gukHznlC2zpg3qkZpzNy6U3h4HV4HdV4XuvkM";
    const supabase = createClient(supabaseUrl, supabaseKey);

    const contenedor = document.getElementById("productos-container");

    async function cargarProductos() {
        const { data: productos, error } = await supabase
            .from("productos")
            .select("*")
            .order("id", { ascending: false }); // Los √∫ltimos primero

        if (error) {
            console.error("Error cargando productos:", error);
            contenedor.innerHTML = "<p>No se pudieron cargar los productos.</p>";
            return;
        }

        contenedor.innerHTML = ""; // Limpiar

        productos.forEach(prod => {
            const div = document.createElement("div");
            div.classList.add("producto");

            div.innerHTML = `
                <img src="${prod.imagen || 'https://via.placeholder.com/150'}">
                <h3>${prod.nombre}</h3>
                <p>$${prod.precio}</p>
                <button class="agregar-carrito"
                    data-nombre="${prod.nombre}"
                    data-precio="${prod.precio}">
                    Agregar al carrito
                </button>
            `;

            contenedor.appendChild(div);
        });

        activarBotones();
    }

    function activarBotones() {
        const botones = document.querySelectorAll(".agregar-carrito");

        botones.forEach(btn => {
            btn.addEventListener("click", () => {
                const nombre = btn.dataset.nombre;
                const precio = btn.dataset.precio;

                agregarAlCarrito(nombre, precio);
            });
        });
        
    }

    cargarProductos();
</script>
  
    <!-- Contacto -->
    <section id="contacto" class="contacto">
        <h2>Contacto</h2>
        <a href="mailto:maryveggastark@gmail.com">Enviar correo a maryveggastark@gmail.com</a>
        
    </section>

    <!-- Pie de p√°gina -->
    <footer>
        <p>&copy; 2026 MaryStark Digital - Todos los derechos reservados</p>
    </footer>  
    <script src="script.js"></script>      
</body>
</html>
